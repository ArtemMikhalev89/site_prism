language: ruby

dist: trusty

rvm:
  - 2.0.0
  - 2.1.10
  - 2.2.9
  - 2.3.6
  - 2.4

gemfile:
  - Gemfile

before_install:
  - gem install bundler

before_script:
  - wget https://github.com/mozilla/geckodriver/releases/download/v0.19.1/geckodriver-v0.19.1-linux64.tar.gz
  - mkdir geckodriver
  - tar -xzf geckodriver*.tar.gz -C geckodriver
  - export PATH=$PATH:$PWD/geckodriver DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

script:
  - bundle exec rake

branches:
  only:
    - master
